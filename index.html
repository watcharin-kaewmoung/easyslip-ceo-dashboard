<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="EasySlip CEO Financial Dashboard — FY 2026">
  <meta name="theme-color" content="#0f172a">
  <title>EasySlip — CEO Financial Dashboard 2026</title>
  <link rel="icon" href="assets/logo.svg" type="image/svg+xml">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Noto+Sans+Thai:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="css/theme.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/components.css">

  <!-- ApexCharts -->
  <script defer src="https://cdn.jsdelivr.net/npm/apexcharts@3.49.0/dist/apexcharts.min.js"></script>

  <!-- Lucide Icons -->
  <script defer src="https://unpkg.com/lucide@0.344.0/dist/umd/lucide.min.js"></script>

  <style>
    /* Critical inline — prevent FOUC */
    .page-loading {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 60vh;
    }
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid var(--border-default);
      border-top-color: var(--color-accent);
      border-radius: 50%;
      animation: spin .8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
  <script>
    // Immediate theme application to prevent FOUC
    (function() {
      var theme = localStorage.getItem('easyslip_theme') || 'dark';
      if (theme === 'light') document.documentElement.setAttribute('data-theme', 'light');
    })();
  </script>
  <style>
    /* Icon visibility based on theme — prevents flash */
    /* Dark (default): show sun icon, hide moon */
    :root:not([data-theme]) #theme-icon-moon { display: none !important; }
    /* Light: show moon icon, hide sun */
    [data-theme="light"] #theme-icon-sun { display: none !important; }
  </style>
</head>
<body>
  <!-- Skip navigation for accessibility -->
  <a href="#page-content" class="skip-nav">Skip to content</a>

  <div class="app" id="app">
    <!-- Sidebar (rendered by sidebar.js) -->
    <aside class="sidebar" id="sidebar" role="navigation" aria-label="Main navigation"></aside>
    <div class="sidebar-overlay" id="sidebar-overlay" aria-hidden="true"></div>

    <!-- Main -->
    <main class="main-content" id="main-content">
      <header class="page-header" id="page-header">
        <div style="display:flex;align-items:center;gap:12px">
          <button class="mobile-menu-btn" id="mobile-menu-btn" aria-label="Toggle menu">
            <i data-lucide="menu" style="width:24px;height:24px"></i>
          </button>
          <h2 id="page-title">Dashboard</h2>
        </div>
        <div class="header-actions">
          <span style="font-size:.75rem;color:var(--text-secondary)">FY 2026</span>
          <button class="sync-btn" id="sync-btn" aria-label="Sync with Google Sheets" title="Sync Google Sheets (กดค้างเพื่อตั้งค่า URL)">
            <i data-lucide="cloud" style="width:18px;height:18px"></i>
            <span class="sync-dot" style="position:absolute;top:2px;right:2px;width:6px;height:6px;border-radius:50%;background:#64748b"></span>
          </button>
          <button class="lang-toggle" id="lang-toggle" aria-label="Toggle language">
            <span id="lang-label">TH</span>
          </button>
          <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
            <i data-lucide="sun" id="theme-icon-sun" style="width:18px;height:18px"></i>
            <i data-lucide="moon" id="theme-icon-moon" style="width:18px;height:18px"></i>
          </button>
        </div>
      </header>
      <div class="page-container" id="page-content">
        <div class="page-loading" role="status" aria-label="Loading">
          <div class="loading-spinner"></div>
        </div>
      </div>
    </main>
  </div>

  <!-- Toast container -->
  <div id="toast-container" role="alert" aria-live="polite" style="position:fixed;bottom:24px;right:24px;z-index:200;display:flex;flex-direction:column;gap:8px"></div>

  <!-- App entry -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
